name: Rust
on:
  push:
    paths:
      - ".github/workflows/rust.yml"
      - "rust/**"
jobs:
  rust-exercises:
    name: Rust Exercises
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: rust/exercises
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2
      - name: Install Rust toolchain
        run: |
          curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
          echo "$HOME/.cargo/bin" >> "$GITHUB_PATH"
          rustup install 1.53.0
          rustup default 1.53.0
      - name: Run compiling in Rust Exercises
        run: cargo check
      - name: Run tests in Rust Exercises
        run: cargo test
      - name: Run linting in Rust Exercises
        run: cargo clippy -- -D warnings
      - name: Run formatting check in Rust Exercises
        run: cargo fmt -- --check
